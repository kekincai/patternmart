import{D as a}from"./index-BbVyqgXj.js";class p{run(o){a.log("Template Method","开始执行结算流水线...");const t=this.calculateSubtotal(o),l=this.applyDiscounts(t,o),e=t-l,c=this.calculateTax(e),s=this.calculateShipping(e),n=this.calculateTotal(e,c,s);return this.onComplete(n),{subtotal:t,discount:l,tax:c,shipping:s,total:n}}calculateSubtotal(o){const t=o.items.reduce((l,e)=>l+e.price*e.quantity,0);return a.log("Template Method",`  步骤1: 计算小计 = ¥${t}`),t}applyDiscounts(o,t){return a.log("Template Method","  步骤2: 应用折扣 = ¥0"),0}calculateTax(o){const t=o*.1;return a.log("Template Method",`  步骤3: 计算税费 = ¥${t.toFixed(2)}`),t}calculateShipping(o){const t=o>=200?0:15;return a.log("Template Method",`  步骤4: 计算运费 = ¥${t}`),t}calculateTotal(o,t,l){const e=o+t+l;return a.log("Template Method",`  步骤5: 计算总计 = ¥${e.toFixed(2)}`),e}onComplete(o){a.log("Template Method",`流水线完成，总计: ¥${o.toFixed(2)}`)}}export{p as CheckoutPipeline};
